#!/bin/bash

# get current workspace id
focused_workspace=$(i3-msg -t get_workspaces | jq '.[] | select(.focused==true).name')
container=$(i3-msg -t get_tree | jq ".nodes[].nodes[] | select(.name==\"content\").nodes[]| select(.name=="$focused_workspace")")

con_id=`echo $container | jq '.id'`
new_workspace_name=$(echo "" | rofi -dmenu -p "name new workspace: ")
if [ $new_workspace_name ]; then
  `i3-msg '[con_id='${con_id}'] move to workspace '${new_workspace_name}` 2> /dev/null
  `i3-msg workspace ${new_workspace_name}` 2> /dev/null
fi
# i3-msg -t get_tree | jq '.nodes[1].nodes[1].nodes[1]'
# i3-msg '[name="id"] move to workspace worspacename'
